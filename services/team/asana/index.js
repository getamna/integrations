"use strict";var __awaiter=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,i){function r(t){try{d(a.next(t))}catch(t){i(t)}}function o(t){try{d(a.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}d((a=a.apply(t,e||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const __1=require("..");class Asana extends __1.TeamInterface{constructor(t,e){super(t,e),this.opts=e,this.httpClient.defaults.baseURL="https://app.asana.com/api/1.0/"}getWorkById(t){return __awaiter(this,void 0,void 0,(function*(){const e=(yield this.httpClient.get("tasks/"+t)).data,{data:s}=e;return{id:s.gid,title:s.name,body:s.notes,assignees:[{name:s.assignee.name,id:s.assignee.gid}]}}))}searchAllIssues(t,e){return __awaiter(this,void 0,void 0,(function*(){const s=(yield this.httpClient.get(`workspaces/${t}/tasks/search?text=${e}`)).data,a=[];return s.forEach(t=>{const{data:e}=t;a.push({id:e.gid,title:e.name,body:e.notes,assignees:[{name:e.assignee.name,id:e.assignee.gid}]})}),a}))}createIssue(t,e){return __awaiter(this,void 0,void 0,(function*(){const{title:s,body:a,assignees:n}=t,i={data:{assignee:n[0],name:s,notes:a,workspace:e}},r=yield this.httpClient.post("tasks",i);if(201==r.status){return r.data.data.gid}return""}))}deleteIssue(t){return __awaiter(this,void 0,void 0,(function*(){return 200==(yield this.httpClient.get("tasks/"+t)).status}))}}exports.Asana=Asana;