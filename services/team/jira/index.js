"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{u(s.next(t))}catch(t){a(t)}}function o(t){try{u(s.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}u((s=s.apply(t,e||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const __1=require("../../"),__2=require("..");class Jira extends __2.TeamInterface{constructor(t,e){super(t,e),this.opts=e,this.httpClient.defaults.headers={Authorization:"Basic "+this.opts.authorizers[__1.TeamServiceType.Jira].apiToken}}getWorkById(t,e){var i,s;return __awaiter(this,void 0,void 0,(function*(){const n=(yield this.httpClient({method:"get",url:"issue/"+t,baseURL:`https://${e}.atlassian.net/rest/api/3/`})).data,{fields:a}=n;return{id:t,title:a.summary,body:a.description.content[0].content[0].text,assignees:[{name:(null===(i=a.assignee)||void 0===i?void 0:i.displayName)||"",id:null===(s=a.assignee)||void 0===s?void 0:s.accountId}]}}))}searchAllIssues(t,e){throw new Error("Method not implemented.")}createIssue(t,e,i){return __awaiter(this,void 0,void 0,(function*(){const{title:s,body:n,assignees:a}=t,r={fields:{summary:s,project:{id:i},issuetype:{id:"10002"},description:n,assignee:{id:a[0]}}},o=yield this.httpClient({method:"post",url:"issue",baseURL:`https://${e}.atlassian.net/rest/api/3/`,data:r});if(201==o.status){return o.data.id}return""}))}deleteIssue(t,e){return __awaiter(this,void 0,void 0,(function*(){return 204==(yield this.httpClient({method:"get",url:"issue/"+t,baseURL:`https://${e}.atlassian.net/rest/api/3/`})).status}))}}exports.Jira=Jira;